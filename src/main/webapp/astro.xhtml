<?xml version="1.0" encoding="UTF-8"?>

<ui:composition xmlns:tc="http://myfaces.apache.org/tobago/component"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns="http://www.w3.org/1999/xhtml">
  <f:view>
    <tc:page label="Fotografie" id="page">

      <f:event type="preRenderView" listener="#{navigation.checkRequestParam}"/>

      <tc:style file="#{request.contextPath}/webjars/katex/0.11.0/dist/katex.min.css"/>
      <tc:script file="#{request.contextPath}/webjars/katex/0.11.0/dist/katex.min.js"/>

      <tc:style file="#{request.contextPath}/css/latex.css"/>
      <tc:script file="#{request.contextPath}/js/latex.js" type="module"/>
      <tc:script file="#{request.contextPath}/js/full-screen.js" type="module"/>

      <tc:header fixed="true">
        <!-- tbd: how to solve this? -->
        <!--<tc:style customClass="bg-inverse"/>-->

        <tc:bar>
          <tc:style customClass="bg-light box-shadow navbar-expand-md"/>
          <f:facet name="brand">
            <tc:link label="Astronomie" link="#{request.contextPath}"/>
          </f:facet>

          <tc:links>
            <tc:link label="Blog" omit="true">
              <tc:link label="Winkelberechnung">
                <f:param name="blog" value="grad/grad"/>
                <f:ajax listener="#{navigation.toBlog}" render=":page:astro"/>
              </tc:link>
              <tc:link label="Winkelberechnung (vuejs)">
                <f:param name="blog" value="grad/grad-vue"/>
                <f:ajax listener="#{navigation.toBlog}" render=":page:astro"/>
              </tc:link>
              <tc:link label="Setup">
                <f:param name="blog" value="setup/setup"/>
                <f:ajax listener="#{navigation.toBlog}" render=":page:astro"/>
              </tc:link>
              <tc:link label="Bildbearbeitung" omit="true">
                <tc:link label="DSS + PS">
                  <f:param name="blog" value="bildbearbeitung/bildbearbeitung"/>
                  <f:ajax listener="#{navigation.toBlog}" render=":page:astro"/>
                </tc:link>
                <tc:link label="PixInsight">
                  <f:param name="blog" value="bildbearbeitung-pi/bildbearbeitung-pi"/>
                  <f:ajax listener="#{navigation.toBlog}" render=":page:astro"/>
                </tc:link>
              </tc:link>
              <tc:link label="Sky Quality Meter">
                <f:param name="blog" value="sky-quality-meter/sky-quality-meter"/>
                <f:ajax listener="#{navigation.toBlog}" render=":page:astro"/>
              </tc:link>
              <tc:link label="Fotoobjektiv vs. Maksutov">
                <f:param name="blog" value="vergleich/vergleich-zoom-200-maksutov-c90"/>
                <f:ajax listener="#{navigation.toBlog}" render=":page:astro"/>
              </tc:link>
              <tc:link label="Rauschen von Kameras">
                <f:param name="blog" value="sensorrauschen/rauschen"/>
                <f:ajax listener="#{navigation.toBlog}" render=":page:astro"/>
              </tc:link>
              <tc:link label="Leichte Teleskope">
                <f:param name="blog" value="star-adventurer/small-teleskopes"/>
                <f:ajax listener="#{navigation.toBlog}" render=":page:astro"/>
              </tc:link>
              <tc:link label="Software">
                <f:param name="blog" value="software/software"/>
                <f:ajax listener="#{navigation.toBlog}" render=":page:astro"/>
              </tc:link>
              <tc:link label="Links">
                <f:param name="blog" value="links/links"/>
                <f:ajax listener="#{navigation.toBlog}" render=":page:astro"/>
              </tc:link>
              <tc:link label="Planetarium (Todo)" image="wrench">
                <f:param name="blog" value="todo/planetarium"/>
                <f:ajax listener="#{navigation.toBlog}" render=":page:astro"/>
              </tc:link>
            </tc:link>
            <tc:link label="Fotos">
              <f:ajax listener="#{photoController.toList}" render=":page:astro"/>
            </tc:link>
            <tc:link label="Kameras">
              <f:ajax listener="#{cameraController.toList}" render=":page:astro"/>
            </tc:link>
            <tc:link label="Objekte">
              <f:ajax listener="#{celestialController.toList}" render=":page:astro"/>
            </tc:link>
            <tc:link label="Hilfe" omit="true">
              <tc:link label="Ãœber">
                <tc:dataAttribute name="alert-text" value="Webframework: Tobago (http://myfaces.apache.org/tobago)"/>
              </tc:link>
              <tc:link label="Kontakt">
                <tc:dataAttribute name="alert-text" value="Elektro-Briefe an: webmaster @ schnurpfeil.de"/>
              </tc:link>
            </tc:link>
          </tc:links>

          <f:facet name="after">
            <tc:flexLayout columns="auto auto">
<!--
              <tc:form>
                <tc:in placeholder="Search (todo)" labelLayout="skip">
                  <f:facet name="after">
                    <tc:button defaultCommand="true" omit="true" image="fa-search">
                      <tc:dataAttribute name="alert-text" value="Sorry: Search not implemented"/>
                    </tc:button>
                  </f:facet>
                </tc:in>
              </tc:form>
-->
              <popecke-full-screen><tc:button tip="Vollbild" image="fa-arrows-alt" omit="true"/></popecke-full-screen>
            </tc:flexLayout>
          </f:facet>
        </tc:bar>
      </tc:header>

      <tc:panel id="astro">

        <tc:messages/>

        (including: #{navigation.current})

        <ui:include src="#{navigation.current}"/>

      </tc:panel>

    </tc:page>
  </f:view>
</ui:composition>
