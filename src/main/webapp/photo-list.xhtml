<?xml version="1.0" encoding="UTF-8"?>

<ui:composition xmlns:tc="http://myfaces.apache.org/tobago/component"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns="http://www.w3.org/1999/xhtml">

  <f:event type="preRenderView" listener="#{photoController.findAll}"/>

  <tc:box label="Fotos">
    <f:facet name="bar">
      <tc:button image="bi-plus-lg" label="Neu">
        <f:ajax listener="#{photoController.create}" render=":page:astro"/>
      </tc:button>
    </f:facet>

    <tc:sheet value="#{photoController.all}" var="photo" id="sheet" markup="hover">
      <tc:row>
        <f:ajax listener="#{photoController.select}" render=":page:astro"/>
      </tc:row>
      <tc:column>
        <tc:image value="#{photo.thumb}" labelLayout="skip"/>
      </tc:column>
      <tc:column label="Objekt" sortable="true">
        <tc:out value="#{photo.name}" labelLayout="skip"/>
      </tc:column>
      <tc:column label="Beschreibung" sortable="true">
        <tc:out value="#{photo.description}" labelLayout="skip"/>
      </tc:column>
      <tc:column label="Datum" sortable="true">
        <tc:out value="#{photo.begin}" labelLayout="skip">
          <f:convertDateTime type="date"/>
        </tc:out>
      </tc:column>
    </tc:sheet>

  </tc:box>

</ui:composition>
